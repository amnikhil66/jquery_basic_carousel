(function($){$.fn.basicCarousel=function(options){var $images=this.find("img"),$wrapper=this.find(".image-wrapper"),$imageMarker=this.append("<ul class='marker-wrapper'><li class='active-marker'></li></ul>").find(".marker-wrapper"),$prev_this=this,$firstImage=$($images[0]),timer=null,duration=!!options?options.duration:3000;$firstImage.addClass("active");$wrapper.css({width:$firstImage.width()+"px",height:$firstImage.height()+"px"});for(var i=1;i<$images.length;i++){$($images[i]).css({left:$($images[i]).width()*i+"px"});$imageMarker.append("<li>")}$imageMarker.css({width:$firstImage.width()+"px"}).find("li:first-child").css({marginLeft:(($firstImage.width()-($imageMarker.children().length*10))/2)+"px"});var resetTimer=function(){clearInterval(timer);timer=setInterval(forward,duration)};var forward=function(){var $active=$prev_this.find(".active"),$next=$active.next().length===0?$($images[0]):$active.next(),$activeMarker=$prev_this.find(".active-marker"),$nextMarker=$activeMarker.next().length===0?$imageMarker.find("li:first-child"):$activeMarker.next();transistionCallback($active,$next,"-"+$active.width()+"px",+$next.width()+"px",$activeMarker,$nextMarker);resetTimer()};var backward=function(){var $active=$prev_this.find(".active"),$prev=$active.prev().length===0?$($images[$images.length-1]):$active.prev(),$activeMarker=$prev_this.find(".active-marker"),$prevMarker=$activeMarker.prev().length===0?$imageMarker.find("li:last-child"):$activeMarker.prev();transistionCallback($active,$prev,$active.width()+"px","-"+$prev.width()+"px",$activeMarker,$prevMarker);resetTimer()};var transistionCallback=function($currentEle,$nextEle,left_current,left_next,$currentMarker,$nextMarker){$currentEle.removeClass("active").stop().animate({left:left_current},{duration:500,easing:"linear"});$nextEle.css({left:left_next}).addClass("active").stop().animate({left:"0"},{duration:500,easing:"linear"});$currentMarker.removeClass("active-marker");$nextMarker.addClass("active-marker")};$(document).on("keydown",function(event){if(event.keyCode===37){backward()}if(event.keyCode===39){forward()}});timer=setInterval(forward,duration);return this}})(jQuery);